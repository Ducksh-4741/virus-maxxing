<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ThreatScan â€” Virus Detection System</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<div id="loading">
    <div class="spinner"></div>
    <p>Scanning fileâ€¦ running all detection enginesâ€¦</p>
</div>

<div class="container">
    <h1>ğŸ›¡ï¸ Security Maxxing</h1>
    <p style="text-align:center;color:#64748b;margin-bottom:28px;">
        Multi-engine file threat analysis â€” Signature Â· Heuristic Â· Entropy Â· PE Â· Obfuscation
    </p>

    <form action="/scan" method="POST" enctype="multipart/form-data" id="scanForm">
        <div class="upload-area" id="dropZone">
            <div class="upload-icon">ğŸ“‚</div>
            <div class="upload-text">
                <strong>Click to choose a file</strong> or drag &amp; drop here
            </div>
            <div id="file-name">No file selected</div>
            <input type="file" name="file" id="fileInput" required>
        </div>

        <p style="font-size:.8rem;color:#475569;text-align:center;margin-top:6px;">
            Supports: EXE, DLL, PDF, DOC, DOCX, ZIP, JS, VBS, BAT, PS1, PY, SH, APK, and more Â· Max 32 MB
        </p>
        <button type="submit">ğŸ” Scan File</button>
    </form>

    <div class="nav">
        <a href="/dashboard">ğŸ“Š Dashboard</a>
        <a href="/history">ğŸ“œ Scan History</a>
        <a href="/admin">âš™ï¸ Admin</a>
    </div>
</div>

<script>
const fileInput = document.getElementById('fileInput');
const fileName  = document.getElementById('file-name');
const form      = document.getElementById('scanForm');
const loading   = document.getElementById('loading');
const dropZone  = document.getElementById('dropZone');

fileInput.addEventListener('change', () => {
    fileName.textContent = fileInput.files[0]?.name || 'No file selected';
});

// Drag & drop
dropZone.addEventListener('dragover', e => { e.preventDefault(); dropZone.style.borderColor='#3b82f6'; });
dropZone.addEventListener('dragleave', () => { dropZone.style.borderColor=''; });
dropZone.addEventListener('drop', e => {
    e.preventDefault();
    dropZone.style.borderColor='';
    if (e.dataTransfer.files.length) {
        fileInput.files = e.dataTransfer.files;
        fileName.textContent = e.dataTransfer.files[0].name;
    }
});

form.addEventListener('submit', () => {
    loading.style.display = 'flex';
});
</script>
</body>
</html>
